version: '3'
services:
    backup:
        build:
            context: './backup/'
            args:
                API_TOKEN: "${DROPBOX_TOKEN}"
                DB_FILE: "${DB_FILE}"
        volumes:
            - /opt/visitorsignin/database:/backupservice/database
            - /opt/visitorsignin/log:/backupservice/log
    database-api:
        build:
            context: ./database_api/
            args:
                DB_FILE: "${DB_FILE}"
        ports:
            - 5000:5000
        volumes:
            - /opt/visitorsignin/database:/databaseapi/database
            - /opt/visitorsignin/log:/databaseapi/log
    database-admin:
        build:
            context: ./database_admin/
            args:
                DB_FILE: "${DB_FILE}"
        ports:
            - 5001:5001
        volumes:
            - /opt/visitorsignin/database:/databaseadmin/database
    print:
        build:
            context: './printing'
        ports:
            - 5002:5002
        volumes:
            - /opt/visitorsignin/log:/printservice/log
    frontend:
        build:
            context: './frontend'
            args:
                REQUEST_HOST: "${REQUEST_HOST}"
        ports:
            - 5003:5003
